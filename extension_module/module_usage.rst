================
拓展模块使用说明
================

红外深度传感器
--------------
1.介绍：

红外深度传感器的设计是基于 TOF(Time of Flight)即飞行时间原理。即传感器发出经调制的近红外光，遇物体后反射，传感器通过计算光线发射和反射时间差或相位差，来计算距离物体的距离。

2.产品特性

红外深度传感器的探测面积见下图，

.. image:: ../images/tof.png

其发出的是一个角度为 20° 的圆锥光，这个光斑 D 与距离 Dist 的关系：

    **D=2×Dist×tan⁡(10)**

要实现最佳测试效果，应保证目标物的尺寸要至少等于 TOF 光斑的尺寸。
 
.. tip:: 如果目标物小于光斑大小，那么应保证目标物尽量在光斑的中心位置，因为光斑内的光强分布并不是均匀的，而是呈一个类高斯分布，中间光强大，四周光强小，为了保证返回光能量足够，应尽量保证目标物在光斑中心。


3.引脚说明

====== ======= ====== ===========
编号    引脚    功能   对应连接项
====== ======= ====== ===========
1	VCC	供电	电源正极
2	GND	供电	电源地
3	TX	发送	RX
4	RX	接收	TX
====== ======= ====== ===========

4.通讯协议和数据格式

========= ====== ====== ====== ==========
通讯接口  波特率 数据位 停止位  奇偶校验
========= ====== ====== ====== ==========
UART      115200   8      1     none
========= ====== ====== ====== ==========

控制命令输入:

.. data:: ir_distance_sensor_measure_on

	:描述: 打开红外深度传感器数据输出
	

.. data:: ir_distance_sensor_measure_off

	:描述: 关闭红外深度传感器数据输出
	

数据输出:

.. data:: ir distance:xxx

	:描述: 红外深度传感器数据格式
	
.. tip:: 命令格式都以字符串形式输入和输出

舵机
--------
1.介绍

舵机的油门控制方式除了支持 485 控制，还可以进行 PWM 控制，控制模式包含：速度模式和角度模式。

.. note:: 舵机的控制模式

    舵机的控制模式需要通过官方的编程接口（ Scratch / Python ）进行切换，并且会记录在舵机内部，不会随着舵机掉电而重置。使用 PWM 控制前请确认舵机当前的控制模式。

2.引脚说明

舵机上的 485 管脚和 PWM 管脚复用，如下图所示

.. image:: ../images/servo.png


3.控制说明

在 PWM 控制方式下，舵机对应的输入输出

+----------+------------+------------+------------------+   
| 控制模式 | 脉冲周期   |  油门范围  |    舵机输出      |   
+==========+============+============+==================+   
| 角度模式 |    50Hz    | 2.5%~12.5% |     0°~360°      |   
+----------+------------+------------+------------------+    
|          |            | 2.5%~7.5%  |49rpm~0rpm,顺时针 |   
| 速度模式 |    50hz    +------------+------------------+   
|          |            | 7.5%~12.5% |0rpm~—49rpm,逆时针|   
+----------+------------+------------+------------------+ 
